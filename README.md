# ExtensionFilter

Extension Filter Project for flow.team by 박영서
 
프로젝트를 진행하기에 앞서, 저는 일단 확장자의 정확한 정의와 운영체제에서 구분하는지 확실히 짚고 넘어가야 한다고 생각하였습니다.

### 확장자란?
    파일 확장자는 컴퓨터 파일의 이름에서 파일의 종류와 그 역할을 표시하기 위해 사용하는 부분이다.(출처: 위키백과)

즉, 파일의 끝에서 마침표 뒤에 위치하여 파일의 형식을 식별하는데 사용되는 문자열이라고 이해하였습니다.

### 운영체제에서의 확장자

확장자는 파일 연동, 보안 정책, 미리보기, MIME타입 추론 등 보안과 긴밀한 관계를 갖습니다.

그렇기 때문에 확장자를 검증하지 않게 된다면, 다음과 같은 보안 위협으로 이어질 수 있습니다.

- .sh, .exe같은 파일로 원격으로 바이러스를 실행

- .jpg.exe 같이 확장자 형식을 이중으로 사용하여 위장하여 서버에 접근

- .zip, .docx로 위장한 실행 파일 삽입

## 고려사항

이러한 확장자에 대한 이해를 바탕으로 해당 과제를 진행한다면,

사용자가 추가한 차단 확장자에서 다음과 같은 사항을 고려해야 합니다.

- 마지막 확장자만 보지말고 전체 파일명을 확인하여 의심 목록으로 분류

- 확장자만으로는 신뢰하지 않고 MIME 타입에 대한 검증

- EXE, eXe, ExE와 같이 위장할 수 있으므로 소문자로 일괄 처리, 공백 제거

## 설계

본 과제의 목적은 차단할 확장자를 서버에 등록하고, 클라이언트가 파일을 첨부하면, 해당 파일이 첨부 가능 여부에 대한 요청을 서버에 보내 제한 여부를 판단합니다.

파일 확장자 차단 클라이언트(port 5173)
- 파일 확장자 추가 및 삭제를 서버에 요청합니다.
- 확장자의 대소문자를 구분하지 않습니다.

파일 저장 요청 테스트 클라이언트(Grafana K6, port 5173)
- 실제로 서버가 확장자를 잘 차단하는지 임의의 형식을 가진 파일을 첨부하여 전송 가능 여부를 서버에 요청합니다.

파일 확장자 차단 역방향 프록시 서버(port 8080)
- 파일 추가가 가능한지 묻는 요청이 서버로 가기 전에, 요청을 사전 필터링합니다.
- 서버의 부하를 줄이고 위험 파일로부터 서버를 보호하며, 잘못된 형식이 적용된 확장자들을 먼저 걸러냅니다.
- 

파일 확장자 차단 서버(port 9000)
- 클라이언트로부터 요청받은 확장자를 추가/삭제합니다. 
- 확장자 차단 클라이언트에게 등록된 차단 확장자의 리스트를 반환합니다.
- 역방향 프록시로부터 파일 확장자 검증 요청을 받아서 검증을 진행합니다.
- 차단된 확장자가 아니고 안전한 형식이라고 판단된 경우에만 역방향 프록시로부터 

차단 확장자 데이터베이스(port 3306)
- 차단된 확장자를 저장합니다.

[!img](이미지주소)
